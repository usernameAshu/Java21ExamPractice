//Deutsche Bank
1. Virtual thread. How is it able to create so many threads without resource limit exceeding
2. Custom exception can be checked or unchecked ?
Which one to use in which scenario ?
3. API optimisation - database layer, application layer 
4. Factory pattern 
5. What is hashing?
6. When you put objects in a Set, how are the objects compared ? (how are equals and hashcode contracts checked)
7. Custom Serialization
8. How can we connect 2 datasources from java application ?

//Publicis Sapient 
Write a messaging queue model using wait and notify methods 

//ThoughtWorks
Write the REST API for a POST http method. 
Using all best practices and Coding standards, along with Pair programming.

//Nasdaq
Most of the questions were related to Kafka. 
How we can implement failure mechanisms in Kafka queues, 
How to handle retry logics, how to process failed records from DLQ.
Coding problem in their existing repository

Reverse a string in java
sort a hashmap (ascending or descending) (keys and values)
What is final keyword in java?
What is the use of static in Java?
Java program to read the content from CSV and print in console.
Separate 0s and 1s in the array 

//Morgan Stanley

//Chubb
1. Remove duplicates from an array.
i/p: [1,2,5,3,5,2,1] => o/p: [1,2,5,3]

2. Given a map of Name and Salary, Group employees based on salary.
i/p: {John: 1000, Jane: 1500, Doe: 1000, Smith: 2000} => o/p: {1000: [John, Doe], 1500: [Jane], 2000: [Smith]}

//NetCracker (OSS Support wing)

1. Group anagrams: Anagrams are strings which have same characters but in different order.
i/p: ['cat', 'dog', 'tac', 'god', 'act'] => o/p: [['cat', 'tac', 'act'], ['dog', 'god']]

2. Given a list of names, convert it to a map of index and name.
i/p: ['John', 'Jane', 'Doe', 'Smith'] => o/p: {0: 'John', 1: 'Jane', 2: 'Doe', 3: 'Smith'}

Round 2:
1. Given a list of integers, find out the largest number that can be formed by concatenating the integers.
i/p: [3, 30, 34, 5, 9] => o/p: 9534330

//Morgan & Stanley
1. Given a Collection of Jobs, where each job has start and end time.
Find the maximum number of jobs that can be executed sequentially. No two jobs can be executed at the same time.
i/p: int[][] jobs = {{1, 3}, {1, 3}, {2, 4}, {3, 4}, {1, 4}};
o/p: 3

2. Given a list of integers, replace the elements with the next greater element on the right side.
Else, replace it with -1.
i/p: [4, 5, 2, 10, 8] => o/p: [5, 10, 10, -1, -1]

//Koch Industries (contracting for TNS)
Round 1 & Round 2 (technical)
1. Given an array of Integers, rotate the array by 'k' elements.
i/p: [1, 2, 3, 4, 5, 6, 7] and k = 3 => o/p: [5, 6, 7, 1, 2, 3, 4]

2. Given a list of Employees, where each Employee has salary & designation. Both are integers.
Find the employee with least designation. Least designation is 0, maximum is 10.
If you have multiple employees with the same designation,
then find the employee with the highest salary.
i/p: [{1000, 5}, {1500, 3}, {2000, 5}, {2500, 3}, {3000, 5}] => o/p: {2500, 3}

Round 3 (Managerial)
1. Explain the architecture of the project
2. How to handle team conflicts ?
3. Have you ever need to innovate and research for your project ?
4. How to deliver projects on schedule to clients ?
5. How much work have you done on architecting a software project ?

Round 4 (Connect with Onshore lead)
General discussion about the project
Explained the team structure
The project is for TNS, and KGSI is contracting for TNS

//IBS
Coding round:
1. Find the max sub array product, return the product value
i/p: [2, 3, -2, 4] => o/p: 6
2. Given two strings (s & t), return the first index where the string 's' has an anagram with 't'.
Example: s = "cbaebabacd", t = "abc" => o/p: 0
Tech round 1:
1. Given an array of letters, which contains alphabets and asterisk(*). We need to create an array
with only the alphabets in the same order.
Example: ['a', 'b', '*', 'c', 'd', '*'] => ['a', 'b', 'c', 'd']
2. Given a list of houses with their networth in integers, there is a thief who can rob the houses
but he cannot rob two adjacent houses. Find the maximum networth he can rob.
Example: [2, 7, 9, 3, 1] => 12
3. Explain the project and the role in the project.
4. Database questions:
a. What is the difference between SQL and NoSQL?
b. What is database sharding and how it is implemented?
c. What is database partioning and how it is implemented?
5. How to make application scalable?
6. What happens when HashMap is full and how to handle it?
Answer: When the HashMap is full, the load factor is increased and the size of the HashMap is doubled.
7. How it affects the key-value pair in the HashMap?
Answer: The key-value pair is stored in the bucket of the HashMap. When the HashMap is full,
the bucket is increased and the key-value pair is stored in the new bucket.
8. What is key rehashing?
Answer: When the HashMap is full, the key rehashing is done to store the key-value pair in the new bucket.

Tech Round 2:
1. What are primary index and secondary index ?
2. In database shards how to handle query where range falls between 2 shards ?
3. There is an email field in database, one million records. We need to query based on email,
how to optimise the search , without using normal equals search ?
4. What is the difference between Component and Service annotation ?
5. How can we configure multiple datasources in spring boot application ?
6. Algorithm question:
Given a list of integers, find the maximum number on immediate right side of the current element.
Example: [2, 3, 1, 4, 5] => [3, 4, 4, 5, -1]

//Bharat Connect (NPCI)
Round 1: (Coding round, HackerRank)
Coding questions: 
Algorithm question:
1. Given 2 strings, and a cost integer. 
We need to replace the letter of 1st string with the 2nd string letter by letter, where the absolute difference between the 2 letters is less than the cost.
Find out the maximum substring with such replacement.
2. 
Spring boot API design:
1. Given an application, fix the existing bugs and add rest endpoints and test with Junit test case.
2. Given an existing app, fix the bugs and execute the test cases.
SQL query to print the names whose firstName & lastName is more than 12 letters

Round 2: Tech round
1. Sort employee list based on salary
2. From tables of customers and orders , print the customer_name and customer_id for shopping over 500.

Round 3: Manager Round
1. How to architect a distributed messaging queue system ?
2. How to handle events which are getting failed ?
3. How to fix an application which is getting exhausted (thread-pools) by the incoming requests from topic ? (Thread-timeout)
4. In a pub-sub model, lets say if there is a huge thread-contention, how to handle that? (Thread-coordinator)
5. In applications, queries are taking huge time to finish, what can we do ? (Database partition & sharding)
6. If we need to create an index for a small dataset, and since BTree index will be a overkill, which index is preferred ?


//Shell Recharge
Round 1: Coding round (HackerRank)
1. Given a integer array jumps, where each jumps says you have to go up or down.
Return the minimum starting stair, so that at any jump you don't go below 1.
Example: jumps array: [1,-2, -4, 3] => o/p: 6 (starting stair)
Demo:
starting stair    Jump
6                  1
7                  -2
5                  -4
1                  3
4
So, it means you have to start from 6th stair, so that you don't go below 1.

2. Rest API question, call a GET api using java HttpClient and fetch the calling code from the response.
API: https://jsonmock.hackerrank.com/api/countries?name={country_name}
Example: https://jsonmock.hackerrank.com/api/countries?name=India
Take care for countries with 2 words like 'United States'
You need to join with "%20" for such countries.
example: https://jsonmock.hackerrank.com/api/countries?name=United%20States

3. MCQ questions regarding Java and SQL
Priority Queue
Try-catch-finally
SQL query syntax 
Calling non-static method from static method.


4. SQL query question:
Given 2 tables, Customers and Orders
Customers: customer_id, customer_name
Orders: order_id, customer_id, min_order_value, max_order_value, is_active
Print a report containing active customers ordered by customer_name. (below format)
customer_id, customer_name, min_order_value, max_order_value, total_ord_value


//World Pay
Round 1: Technical Discussion
Introduce yourself and project 
Some questions around Kafka:
1. How to configure Kafka for an event driven system
2. What are the types of Compatibility of Schema in registry (backward, forward, transitive)
3. How to protect consumers from consuming poison pill from Kafka queue ?
4. How can we control throughput of a micro-service architecture ? (Using API gateway - AWS Rate-limiter)
5. How can we optimise database ? (Partioning and Sharding)
6. What to do handle situation when a micro service fails to respond ? 
	-Circuit breaker pattern
	-Fallback strategy 
	-Retry and push to DLQ strategy


//Netcracker (OSS R&D wing)
Round 1: Technical discussions
-Questions from core Java 
-Order of Initialization
-HashMap question:
Having a employee objects as keys (with equals and HashCode overridden)
Then we change the employee-key here and try to fetch the values from Hashmat using the same key.
We are checking whether the key exists in the map. 
How does it impacts the HashMap ? (Hint: memory leak, since key's hashcode is modified, map won't have that new key, and the old key is not reachable)
-Given a set, we are iterating a set and modifying the elements
How the set will behave ?  -> ConcurrentModificationException
How to mitigate it in a set ?
You can use Iteratorâ€™s remove() method -it's safe for single threaded app
Or use CopyOnWriteArraySet -> when it's a multiple threaded environment 
-DBMS code, where we are manually trying to connect to database using Connection API.
In that code, it's using Statement. 
Do we need to use PreparedStatement ? What is the difference between Statement and PreparedStatement ?
-Algo question
Return all the unique pairs from integer list, whose sum is equal to target sum.

Round 2 (Technical Round)
1. Identify NPE from logs
2. Improve Reentrant logs from the code. Suggest better ways of locking (tryLock, surrounding try-catch-finally with lock.unlock() in finally)
3. Write a REST API for pagination, filtration and sorting. Also, how can we choose multiple columns for filtration and sorting. (Along with operations : equals, matches, not-equals)
4. Develop abstract factory design pattern from the code snippet.
5. Inter service communication was using HTTP REST Api. How can we improve it ? (Using messaging communication)
6. There is a POST request coming to a microservice , we have a DB and Kafka-queue connected to the microservice. 
Condition is that whenever record in persisted to DB, then only notification event should be triggered to Queue. Condition, if record fails to persist, there should be no communication sent out to the Queue. 
(Ans: Use the following steps:
Block: 1
1. POST request comes to service
2. Service validates the request 
3. Begin transaction
Try
4. Save record to db
5. insert into transaction_log table, with sent flag as false
Catch
6. Rollback transaction 
Finally
7. Commit transaction
8. Close transaction.

Block 2:
1. Cron job is scheduled to run every 15mins.
2. Begin transaction
Try
3. Scans the db for the record persisted but not sent
4. Sends the record to kaka queue by KafkaTemplate 
5. Update sent flag to true
Catch 
6. Rollback transaction 
Finally
7. Commit transaction 
8. Close transaction 

//TSYS Global Payments (Round 1 Tech)
1. Algo: Given a list of Teams (name and seniority), and given number of teams.
Divide the teams equally into all teams with decreasing seniority, last team can have less members if required.
2. Explain overriding in Java
3. How to improve query performance ?
4. Kafka topic partitions 
5. What are coding standards being followed ?
6. How do you review code by our juniors ?
7. How do you motivate your teammates?
8. If team is overshooting the work, how to manage it ?


//All-State Insurance Firm (Tech Round 1) [Tech Lead bit target oriented (have to complete, don't care how you complete it), but listener and learner]
1. Describe about the project
2. In Kafka, how can consumers want to consume the last 5 messages from the queue? (Negative offset)
3. In Jenkins pipeline script, we don't want the same person who authorised dev pipeline to approve test pipeline. How to do it ? (CICD, Deployment)
4. In a Database, we want to update the same record by multiple transactions, without applying exclusive lock to the record. How ? (Field level locking)
-This mechanism is widely used across many booking systems, reservations systems 
5. What are the cons of Spring Data JPA, and what are the benefits of using JdbcTemplate ?
6. What are the newly introduced features in Java 21 ?







//Netcracker Round 2 codes:
class Formatter {
    public String format(String value) {
        return "[" + value + "]";
    }
}

public class TestNPE {
    public static String handle(Formatter f, String s) {
        if (s.isEmpty()) {
            return "(none)";
        }
        return f.format(s.trim())
    }
}

/*
From somewhere was invoked method handle and following Exception was thrown:

Exception in thread "main" java.lang.NullPointerException
    at TestNPE.handle(TestNPE.java:9)

What is the reason of exception - f or s?
 */

----------
@Service
@Slf4j
class EventService {

    public Lock lock = new ReentrantLock();

    public void processEvent(Event event) {
        lock.lock();
        //switch case 
        if (event.getType() == EventType.REVIEW_APPROVED) {
            processApproved(event.getId(), event.getPayload());
        } else if (event.getType() == EventType.REVIEW_CREATED) {
            processCreated(event.getId(), event.getPayload());
        } else if (event.getType() == EventType.REVIEW_DELETED) {
            processDeleted(event.getId(), event.getPayload());
        }
        lock.unlock();
    }

//solution :
    {
        if(lock.trylock())
        try {

        } catch(InteE ex) {}
        finally {
            lock.unlock();
        }

    }
    //solution :

    private void processApproved(String id, String payload) {
        throw new Error("Approved event is temporary deprecated!");
    }

    private void processCreated(String id, String payload) {
        log.info("Created: {}, payload: {}", id, payload);
    }

    private void processDeleted(String id, String payload) {
        throw new Error("Deleted event is temporary deprecated!");
    }
}

//abstract factory pattern 

abstract 
-----------------------
@Component
@Slf4j
public class MyService {

    public void processData(List<Data> data) {
        log.debug("process data " + data);
        data.forEach(d -> {
            //do some internal computation
            this.sendProcessedData(d);
        });
    }

    private void sendProcessedData(Data data) {
        // do request with rest template to Microservice C
    }
}

// Microservice A -> current microservice B -> Microservice C

//HTTP rest api comm , page, size, sortBy (price & name), order, filterBy (language & genre), filterValue
GET HTTP/1.1
Params: 
page (default = 0)
size (deafult = 5)
sortBy (default = "id")
order (default ="asc")
filterBy(required=false)
filterValue(required=false)
getUsers()

curl -X POST "http://localhost:8080/api/users?page=0&size=5&sortBy=price&order=asc&filterBy=language&filterValue=english"
-H 'Acceppt:json'
-body '{  "sortBy" : [ {"name": "price", "order" : "desc" }, {"name": "name", "order" : "asc" } ], 
"filterBy" : [ {"name": "language", "value" : "en", operation: "" }, {"name": "genre", "value" : "fiction" , operation: ""}] }'

//ENUM: equals, contains, not-equals 
language : 'en' : !'en'
//
findBookNameContaining(bookname, pagale)











